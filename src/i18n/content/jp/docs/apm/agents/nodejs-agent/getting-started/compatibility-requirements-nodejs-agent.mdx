---
title: Node.jsエージェントの互換性と要件
tags:
  - Agents
  - Nodejs agent
  - Getting started
metaDescription: 'The New Relic Node.js agent supports these frameworks, architectures, and operating systems.'
translationType: human
---

Our Node.js agent includes built-in instrumentation of the most popular Node frameworks, app servers, databases, and message queuing systems. For frameworks and libraries that aren't instrumented out of the box, you can extend the agent with our [Node agent API](/docs/apm/agents/nodejs-agent/api-guides/nodejs-agent-api/).

Our Node.js agent is publicly available on the [Node Package Manager (npm) repository](https://npmjs.org/package/newrelic) as well as on [GitHub](https://github.com/newrelic/node-newrelic). Ready to try out New Relic's Node.js agent? [Create a New Relic account](https://newrelic.com/signup)!

## エージェントのインストール要件

Before [installing the agent](/docs/apm/agents/nodejs-agent/installation-configuration/install-nodejs-agent), check that your system meets its minimum requirements. For best performance, use the latest active long term support (LTS) version of Node.js.

<CollapserGroup>
  <Collapser
    id="operating systems"
    title="Compatible operating systems"
  >
    The Node agent is compatible with the following operating systems:

    * Linux
    * SmartOS
    * MacOS 10.7以上
    * Windows Server 2008 and higher The following are proposed time ranges. The actual release date may vary.
  </Collapser>

  <Collapser
    id="host"
    title="ホスティングサービス"
  >
    It's also compatible with these hosting services:

    * [Google App Engine（GAE）フレキシブル環境](/docs/agents/nodejs-agent/hosting-services/install-new-relic-nodejs-agent-gae-flexible-environment)
    * AWS EC2
    * [Microsoft Azure](/docs/nodejs/nodejs-agent-on-microsoft-azure)
    * [Heroku](/docs/nodejs/nodejs-agent-on-heroku)
  </Collapser>

  <Collapser
    id="security"
    title="セキュリティ要件"
  >
    標準的な [データ収集のセキュリティ対策](/docs/accounts-partnerships/accounts/security/data-security)として、アプリサーバーはSHA-2（256ビット）をサポートしている必要があります。SHA-1はサポートされていません。
  </Collapser>

  <Collapser
    id="system"
    title="システム要件"
  >
    We will support the [latest even versions of Node.js releases](https://nodejs.org/en/about/releases/) by the beginning of the following active long term support schedule. The version support policy does not replace our general end-of-life (EOL) policy.

    提案される時間範囲を以下に示します。実際のリリース日は異なる可能性があります。

    <table>
      <thead>
        <tr>
          <th style={{ width: "100px" }}>
            Node.jsのバージョン
          </th>

          <th>
            アクティブな長期サポート（LTS）開始日
          </th>

          <th>
            サポート付きNode.jsエージェントの初期リリース日
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            18
          </td>

          <td>
            2022年10月
          </td>

          <td>
            2022年8月3日、Node.jsエージェントのv9.0.0を使用
          </td>
        </tr>

        <tr>
          <td>
            16
          </td>

          <td>
            2021年10月
          </td>

          <td>
            Node.jsエージェントv8.0.0を含む2021年7月26日
          </td>
        </tr>

        <tr>
          <td>
            14
          </td>

          <td>
            2020年10月
          </td>

          <td>
            2020年11月9日、Node.jsエージェントv7.0.0
          </td>
        </tr>
      </tbody>
    </table>

    The following are proposed time ranges for EOL on older Node.js versions. The actual release date may vary.

    <table>
      <thead>
        <tr>
          <th style={{ width: "100px" }}>
            Node.jsのバージョン
          </th>

          <th>
            有効期限（EOL）日
          </th>

          <th>
            Node.jsエージェントのサポート終了の初期リリース日
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            12
          </td>

          <td>
            2022年4月
          </td>

          <td>
            2022年8月3日現在、Node.jsエージェントのv9を使用したNode.js 12のサポートを終了しました。
          </td>
        </tr>

        <tr>
          <td>
            10
          </td>

          <td>
            2021年4月
          </td>

          <td>
            2021年7月26日現在で、Node.jsエージェントのv8を使用したNode.js 10のサポートを終了しました。この移行の簡単な準備方法などの詳細については、[エクスプローラーハブの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-support-and-capabilities-across-browser-node-js-agent-query-builder-net-agent-apm-errors-distributed-tracing/153373)を参照してください。
          </td>
        </tr>
      </tbody>
    </table>
  </Collapser>
</CollapserGroup>

## Instrument with Node.js [#instrument]

After installation, the agent automatically instruments with our catalog of supported Node.js libraries and frameworks. This gives you immediate access to granular information specific to your web apps and servers.

For unsupported frameworks or libraries, you'll need to instrument the agent yourself using the [Node.js agent API](/docs/apm/agents/nodejs-agent/api-guides/nodejs-agent-api).

<CollapserGroup>
  <Collapser
    id="Datastores"
    title="データストア"
  >
    Node.jsエージェントは、以下のデータストアに対するNode.jsアプリケーション呼び出しのパフォーマンスを監視します。

    * [Cassandra](https://www.npmjs.com/package/cassandra-driver)
    * [Memcached](https://www.npmjs.com/package/memcached)
    * [MongoDB](https://www.npmjs.com/package/mongodb)
    * MySQL（[mysql](https://www.npmjs.com/package/mysql)と[mysql2](https://www.npmjs.com/package/mysql2)パッケージ経由）
    * [Redis](https://www.npmjs.com/package/redis)
    * [Postgres](https://www.npmjs.com/package/pg)（[ネイティブ](https://www.npmjs.com/package/pg-native)と[ピュアのJavaScript](https://www.npmjs.com/package/pg-js)パッケージを含む）
  </Collapser>

  <Collapser
    id="gRPC"
    title="gRPC"
  >
    * [grpc-js](https://www.npmjs.com/package/@grpc/grpc-js)ライブラリは、単項、ストリーミング、双方向のクライアント呼び出しでサポートされています。
  </Collapser>

  <Collapser
    id="http"
    title="HTTP/1.1"
  >
    Node.jsエージェントは、ネイティブ`http`モジュールをインストゥルメントします。

    また、人気のある[undici](https://www.npmjs.com/package/undici)クライアントも実験的なサポートを受けています。undiciを使用するには、`feature_flag.undici_instrumentation = true`を`newrelic.js` [設定ファイル](/docs/apm/agents/nodejs-agent/installation-configuration/nodejs-agent-configuration/#methods-and-precedence)で設定してください。
  </Collapser>

  <Collapser
    id="instance"
    title="インスタンスの詳細"
  >
    [さまざまなデータベースとデータベースドライバを対象にインスタンスの詳細](/docs/apm/applications-menu/features/analyze-database-instance-level-performance-issues)を収集します。APMにおいて特定のインスタンスおよびデータベース情報の種類が見えるかどうかは、エージェントのバージョンによって異なります。

    New RelicのNode.jsエージェントの[バージョン1.31.0](/docs/release-notes/agent-release-notes/nodejs-release-notes/node-agent-1310)以上では、以下をサポートします。

    <table>
      <thead>
        <tr>
          <th>
            データベース
          </th>

          <th>
            `npm` モジュール名
          </th>

          <th>
            最小モジュールバージョン
          </th>

          <th>
            エージェントの最小バージョン
          </th>
        </tr>
      </thead>

      <tbody>
        <tr>
          <td>
            [PostgreSQL](https://www.postgresql.org/)
          </td>

          <td>
            [pg](https://www.npmjs.com/package/pg)
          </td>

          <td>
            4.0.0
          </td>

          <td>
            1.31.0
          </td>
        </tr>

        <tr>
          <td>
            [Redis](http://redis.io/)
          </td>

          <td>
            [redis](https://www.npmjs.com/package/redis)
          </td>

          <td>
            2.0.0
          </td>

          <td>
            1.31.0
          </td>
        </tr>

        <tr>
          <td>
            [MongoDB](https://www.mongodb.com/)
          </td>

          <td>
            [mongodb](https://www.npmjs.com/package/mongodb)
          </td>

          <td>
            2.1.0
          </td>

          <td>
            1.32.0
          </td>
        </tr>

        <tr>
          <td>
            [MySQL](http://www.mysql.com/)
          </td>

          <td>
            [mysql](https://www.npmjs.com/package/mysql)
          </td>

          <td>
            2.4.1
          </td>

          <td>
            1.32.0
          </td>
        </tr>

        <tr>
          <td>
            [Memcached](https://memcached.org/)
          </td>

          <td>
            [memcached](https://www.npmjs.com/package/memcached)
          </td>

          <td>
            1.0.0
          </td>

          <td>
            1.33.0
          </td>
        </tr>
      </tbody>
    </table>

    現在、New Relicエージェントにリストされてないデータストアからインスタンスレベルの情報をリクエストするには、[support.newrelic.com](https://support.newrelic.com)までお問い合わせください。
  </Collapser>

  <Collapser
    id="logging"
    title="ロギングライブラリ"
  >
    [コンテキストでAPMログ](/docs/apm/new-relic-apm/getting-started/get-started-logs-context)をサポートするために、Node.jsエージェントは次のライブラリをインストゥルメントします。

    * [winston](https://www.npmjs.com/package/winston)
    * [pino](https://www.npmjs.com/package/pino)
  </Collapser>

  <Collapser
    id="messages"
    title="Messages queue"
  >
    [Message queue instrumentation](/docs/agents/nodejs-agent/troubleshooting/troubleshoot-message-consumers) is only available with the [New Relic Node.js agent v2 or higher](/docs/release-notes/agent-release-notes/nodejs-release-notes). Currently supported message queue instrumentation: `amqplib`.

    他のメッセージキューライブラリには、[カスタムインストゥルメンテーション](/docs/agents/nodejs-agent/supported-features/nodejs-custom-instrumentation#message-client)を使用します。
  </Collapser>

  <Collapser
    id="langtech"
    title="Supported languages and technologies"
  >
    [TypeScript](https://www.npmjs.com/package/typescript) is a programming language that can compile to JavaScript. After installation, the Node.js agent automatically instruments your TypeScript apps, giving you immediate access to performance data right out of the box.
  </Collapser>

  <Collapser
    id="support"
    title="サポートされているNode.jsフレームワーク"
  >
    * [Express](https://www.npmjs.com/package/express) 4.6.0以上
    * [Restify](https://www.npmjs.com/package/restify)
    * [Connect](https://www.npmjs.com/package/connect)
    * [Hapi](https://www.npmjs.com/package/hapi)
    * [Koa](https://www.npmjs.com/package/koa) 2.0.0以上（エージェントとともに[外部モジュール](https://github.com/newrelic/node-newrelic-koa)がロードされます）
    * [Fastify](https://www.npmjs.com/package/fastify)
    * [Next.js](https://www.npmjs.com/package/next) 12.0.9以降（ミドルウェア インストゥルメンテーションには12.2.0以降が必要）

    サポートされているフレームワークをデフォルトのルーターとともに使用している場合、Node.jsエージェントはフレームワークのルート名をそのまま読み取ることができます。ただし、フレームワークが提供する名前より固有な名前が必要な場合は、New Relicが[Node.jsトランザクションネーミングAPI](/docs/nodejs/nodejs-transaction-naming-api) によって提供する1つ以上のツールを使用できます。

    <Callout title="有効期限（EOL）の通知">
      2021年11月に、いくつかの機能のサポートを終了しました。これには、Node.jsエージェント用のHapi 19.2より前のOracle Driver PackageとHapiバージョンが含まれています。この移行の簡単な準備方法などの詳細については、[エクスプローラーハブの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-capabilities-and-support-across-node-agents-suggested-pagerduty-responders-incident-workflows-and-kubernetes-instrumentation/164481?u=dholloran)を参照してください。
    </Callout>
  </Collapser>
</CollapserGroup>

## エージェントを他のNew Relic機能に接続する [#digital-intelligence-platform]

Node.jsエージェントはその他の機能と統合し、スタック全体でのオブザーバビリティを実現します。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        製品
      </th>

      <th>
        インテグレーション
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        [ブラウザのモニタリング](/docs/browser/new-relic-browser/getting-started/introduction-new-relic-browser)
      </td>

      <td>
        [自動インストゥルメンテーションを有効化](/docs/browser/new-relic-browser/installation/install-new-relic-browser-agent#select-apm-app)すると、Node.jsエージェントはBrowserモニタリングの利点を追加できます。Browserモニタリングのインジェクションを有効にした後、[Node.jsエージェントを使用してBrowserモニタリングをインストールするためのガイド](/docs/agents/nodejs-agent/extend-your-instrumentation/browser-monitoring-nodejs-agent/)に従うだけです。これらの手順が完了したら、[APMの**概要**ページ](/docs/apm/applications-menu/monitoring/apm-overview-page)でBrowserデータを表示、特定のアプリに対してAPMとBrowserデータ間を素早く切り替えできます。設定オプションと手動インストゥルメンテーションについては、[BrowserモニタリングとNode.jsエージェント](/docs/agents/nodejs-agent/supported-features/new-relic-browser-nodejs-agent)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        [インフラストラクチャのモニタリング](/docs/infrastructure/new-relic-infrastructure/getting-started/introduction-new-relic-infrastructure)
      </td>

      <td>
        インフラストラクチャとAPMエージェントを同じホストにインストールすると、自動的に相互に検出します。その後、APM UIにホストのリストを表示し、インフラストラクチャUIでAPMアプリでインフラストラクチャホストをフィルタリングできます。詳細については、[インフラストラクチャモニターにおけるAPMデータ](/docs/infrastructure/new-relic-infrastructure/data-instrumentation/new-relic-apm-data-infrastructure)を参照してください。
      </td>
    </tr>

    <tr>
      <td>
        [New Relicのダッシュボード](/docs/insights/use-insights-ui/getting-started/introduction-new-relic-insights)
      </td>

      <td>
        Node.jsエージェントは、NRQLクエリの[デフォルトのイベントと属性](/docs/insights/insights-data-sources/default-events-attributes/apm-default-event-attributes)を送信します。高度な分析のために、[カスタムイベントを記録](/docs/insights/insights-data-sources/custom-data/insert-custom-events-new-relic-apm-agents)することもできます。
      </td>
    </tr>

    <tr>
      <td>
        [合成のモニタリング](/docs/synthetics/new-relic-synthetics/getting-started/introduction-new-relic-synthetics)
      </td>

      <td>
        [合成トランザクショントレース](/docs/synthetics/new-relic-synthetics/using-monitors/collect-synthetic-transaction-traces)は、合成モニターからのリクエストを基盤となるAPMトランザクションに接続します。
      </td>
    </tr>
  </tbody>
</table>